# don't create functions twice

class ArrayController extends Object

  @copy = (array)->
    return array.slice()

  @copyRange = (array,index,length)->
    return array.slice(index,index + length)

  @equals = (array,array2)->
    if array2.length isnt array.length
      return no
    for element,index in array2
      if element isnt array[index]
        return no
    return yes



  #checks
  @hasObject = (array,object)->
    return object in array

  @hasAnyOfObjects = (array,objects)->
    for object in objects
      if @hasObject(array,object)
        return yes
    return no

  @hasAllOfObjects = (array,objects)->
    for object in objects
      if not @hasObject(array,object)
        return no
    return yes



  #additions
  @addObject = (array,object)->
    array.push(object);
  @addObjects = (array,objects)->
    for object in objects
      @addObject(array,object)
  @insertObject = (array,object,index)->
    array.splice(index,0,object);




  #removals
  @removeObject = (array,object)->
      loop
        index = array.indexOf(object)
        break if index is -1
        array.splice(index, 1)

  @removeObjects = (array,objects)->
    for object in objects
      @removeObject(array,object)


  @removeFirstObject = (array,object)->
    index = array.indexOf(object)
    if index isnt -1
      array.splice(index, 1)

  @removeLastObject = (array,object)->
    index = array.lastIndexOf(object)
    if index isnt -1
      array.splice(index, 1)


  @replaceObject = (array,object,index)->
    array.splice(index,1,object)


  #moving
  @moveObjectByOffset = (array,object,offset)->
    index = array.indexOf(object)
    @removeFirstObject(array,object)
    if index+offset < 0 or index+offset > array.length
      throw new Error('cannot move outside of range ' + index + ' by ' + offset)
    @insertObject(array,object,index+offset)

  #range
  @range = (start,count)->
    if typeof count is 'undefined'
      count = start
      start = 0

    end = start + count

    array = []
    while start < end
      @addObject(array,start)
      start++

    return array

module.exports = ArrayController
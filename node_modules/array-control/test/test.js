var assert = require('assert');

var ac = require('../index.js')

describe('Content control',function(){
    it('copy',function(){
        var array1 = [1,2,3];
        var array2 = ac.copy(array1);

        assert.ok(array1 !== array2);
        assert.ok(ac.equals(array1,array2))
    })

    it('copyRange',function(){
        var array1 = [1,2,3,4,5,6,7,8,9];
        var array2 = [2,3,4];

        var array3 = ac.copyRange(array1,1,3)
        assert.ok(ac.equals(array3,array2));
    })

    it('equals',function(){
        var array1 = [1,2,3];
        var array2 = ac.copy(array1);
        var array3 = [3,2,1];

        assert.ok(ac.equals(array1,array2))
        assert.ok(!ac.equals(array2,array3))
        assert.ok(!ac.equals(array1,array3))
    })

    describe('has*',function(){
        var obj1 = {},obj2 = {};
        var array1 = [1,2,3,'1','2','3',obj1,obj2];
        var array2 = [3,'3',obj2];
        it('hasObject',function(){
            assert.ok(ac.hasObject(array1,1))
            assert.ok(ac.hasObject(array1,3))
            assert.ok(ac.hasObject(array1,'1'))
            assert.ok(ac.hasObject(array1,'3'))
            assert.ok(ac.hasObject(array1,obj1))
            assert.ok(ac.hasObject(array1,obj2))

            assert.ok(ac.hasObject(array2,3))
            assert.ok(!ac.hasObject(array2,1))
            assert.ok(ac.hasObject(array2,'3'))
            assert.ok(!ac.hasObject(array2,'1'))
            assert.ok(ac.hasObject(array2,obj2))
            assert.ok(!ac.hasObject(array2,obj1))
        })
        it('hasAnyOfObjects',function(){
            assert.ok(ac.hasAnyOfObjects(array1,[1,3,'1',obj1,'xx']))
            assert.ok(!ac.hasAnyOfObjects(array1,['aa','bb']))
            assert.ok(ac.hasAnyOfObjects(array2,[1,2,'3']))
            assert.ok(!ac.hasAnyOfObjects(array2,[1,'1',obj1]))
        })
        it('hasAllOfObjects',function(){
            assert.ok(ac.hasAllOfObjects(array1,[1,3,'1',obj1]))
            assert.ok(!ac.hasAllOfObjects(array1,[1,2,3,'xx']))
            assert.ok(ac.hasAllOfObjects(array2,[3,'3',obj2]))
            assert.ok(!ac.hasAllOfObjects(array2,[3,'3',obj1]))
        })
    })

    it('addObject',function(){
        var array = [];
        var num = 1,obj={},text = '';
        var array2 = [num,obj,text]

        ac.addObject(array,num);
        ac.addObject(array,obj);
        ac.addObject(array,text);

        assert.ok(ac.hasAllOfObjects(array,[num,obj,text]));
        assert.ok(ac.equals(array,array2));
    })

    it('addObjects',function(){
        var array = [];
        var num = 1,obj={},text = '';

        ac.addObjects(array,[num,obj,text]);

        assert.ok(ac.hasAllOfObjects(array,[num,obj,text]));
    })

    it('removeObject',function(){
        var obj = {},num = 1,text = 'aa';
        var array = [obj,num,text];

        ac.removeObject(array,obj)
        assert.ok(array.length == 2)

        ac.removeObject(array,text)
        assert.ok(array.length == 1)

        ac.removeObject(array,num)
        assert.ok(array.length == 0)

        assert.ok(!ac.hasAnyOfObjects(array,[obj,num,text]))
    })

    it('removeFirstObject',function(){
        var array1 = [1,2,3,4,1,2,3,4];
        var array2 = [1,2,4,1,2,3,4]; //removed first 3
        var array3 = [1,2,1,2,3,4]; // removed first 3,4

        ac.removeFirstObject(array1,3);
        assert.ok(ac.equals(array1,array2));

        ac.removeFirstObject(array1,4);
        assert.ok(ac.equals(array1,array3));
    })
    it('removeFirstObject',function(){
        var array1 = [1,2,3,4,1,2,3,4];
        var array2 = [1,2,3,4,1,2,4]; //removed last 3
        var array3 = [1,2,3,4,1,2]; // removed last 3,4

        ac.removeLastObject(array1,3);
        assert.ok(ac.equals(array1,array2));

        ac.removeLastObject(array1,4);
        assert.ok(ac.equals(array1,array3));
    })

    it('replace',function(){
        var array1 = [1,2,3,4]
        var array2 = [1,'aaa',3,4]

        ac.replaceObject(array1,'aaa',1);
        assert.ok(ac.equals(array1,array2));
    })

    it('move',function(){
        var array1 = [1,2,3,4];
        var array2 = [2,3,1,4];

        var array3 = [1,2,3,4];
        var array4 = [3,1,2,4];

        var array5 = [1,2,3,4];
        var array6 = [1,2,4,3];

        ac.moveObjectByOffset(array1,1,2);
        assert.ok(ac.equals(array1,array2))

        ac.moveObjectByOffset(array3,3,-2);
        assert.ok(ac.equals(array3,array4))

        ac.moveObjectByOffset(array5,3,1);
        assert.ok(ac.equals(array5,array6))

        assert.throws(function(){
            ac.moveObjectByOffset(array4,3,-1)
        })
        assert.throws(function(){
            ac.moveObjectByOffset(array4,4,1)
        })
    })

    it('range',function(){
        var array1 = [1,2,3,4];
        var array2 = [3,4,5,6,7,8,9];

        var array3 = ac.range(1,4);
        var array4 = ac.range(3,7);

        assert.ok(ac.equals(array3,array1))
        assert.ok(ac.equals(array4,array2))
    })
})

